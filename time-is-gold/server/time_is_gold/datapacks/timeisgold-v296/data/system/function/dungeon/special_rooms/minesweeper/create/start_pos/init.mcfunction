$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.marker,tag=!dungeon.special_rooms.minesweeper.mine,scores={dungeon.special_rooms.minesweeper.nearby_mine=0},dx=$(size_x),dy=-1,dz=$(size_z)] at @s run function system:dungeon/special_rooms/minesweeper/create/start_pos/count_blank

$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.marker,tag=!dungeon.special_rooms.minesweeper.mine,scores={dungeon.special_rooms.minesweeper.nearby_mine=0},dx=$(size_x),dy=-1,dz=$(size_z)] at @s if score @s dungeon.special_rooms.minesweeper.nearby_blank matches 1.. run tag @s add dungeon.special_rooms.minesweeper.start_pos_temp

$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=8},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s run tag @s add dungeon.special_rooms.minesweeper.start_pos
$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=7},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s unless entity @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos] run tag @s add dungeon.special_rooms.minesweeper.start_pos
$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=6},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s unless entity @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos] run tag @s add dungeon.special_rooms.minesweeper.start_pos
$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=5},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s unless entity @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos] run tag @s add dungeon.special_rooms.minesweeper.start_pos
$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=4},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s unless entity @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos] run tag @s add dungeon.special_rooms.minesweeper.start_pos
$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=3},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s unless entity @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos] run tag @s add dungeon.special_rooms.minesweeper.start_pos
$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=2},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s unless entity @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos] run tag @s add dungeon.special_rooms.minesweeper.start_pos
$execute align xyz positioned ~ ~ ~ as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp,scores={dungeon.special_rooms.minesweeper.nearby_blank=1},dx=$(size_x),dy=-1,dz=$(size_z),sort=random,limit=1] if entity @s unless entity @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos] run tag @s add dungeon.special_rooms.minesweeper.start_pos

execute as @e[type=marker,tag=dungeon.special_rooms.minesweeper.start_pos_temp] run tag @s remove dungeon.special_rooms.minesweeper.start_pos_temp